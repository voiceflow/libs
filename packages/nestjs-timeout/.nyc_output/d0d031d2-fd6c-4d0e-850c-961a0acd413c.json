{"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/index.ts":{"path":"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":60}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":60}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":146}},"4":{"start":{"line":5,"column":92},"end":{"line":5,"column":140}},"5":{"start":{"line":6,"column":23},"end":{"line":6,"column":50}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":131}},"7":{"start":{"line":7,"column":87},"end":{"line":7,"column":125}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":78},"end":{"line":5,"column":79}},"loc":{"start":{"line":5,"column":90},"end":{"line":5,"column":142}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":73},"end":{"line":7,"column":74}},"loc":{"start":{"line":7,"column":85},"end":{"line":7,"column":127}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/index.ts","sources":["/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/index.ts"],"names":[],"mappings":";;;AAAA,6DAA2D;AAAlD,yHAAA,kBAAkB,OAAA;AAC3B,mDAAiD;AAAxC,+GAAA,aAAa,OAAA","sourcesContent":["export { TimeoutInterceptor } from './timeout.interceptor';\nexport { TimeoutModule } from './timeout.module';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"299f63c196a05fdcde14871cb2ebb3451b86e03c"},"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.interceptor.ts":{"path":"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.interceptor.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":30}},"4":{"start":{"line":6,"column":20},"end":{"line":6,"column":45}},"5":{"start":{"line":17,"column":8},"end":{"line":17,"column":35}},"6":{"start":{"line":20,"column":8},"end":{"line":25,"column":12}},"7":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"8":{"start":{"line":22,"column":16},"end":{"line":22,"column":119}},"9":{"start":{"line":22,"column":52},"end":{"line":22,"column":117}},"10":{"start":{"line":24,"column":12},"end":{"line":24,"column":53}},"11":{"start":{"line":24,"column":48},"end":{"line":24,"column":51}},"12":{"start":{"line":28,"column":0},"end":{"line":28,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":27},"end":{"line":18,"column":5}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":104},"end":{"line":20,"column":105}},"loc":{"start":{"line":20,"column":113},"end":{"line":25,"column":9}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":46},"end":{"line":22,"column":47}},"loc":{"start":{"line":22,"column":52},"end":{"line":22,"column":117}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":42},"end":{"line":24,"column":43}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":51}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},{"start":{"line":21,"column":12},"end":{"line":23,"column":13}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.interceptor.ts","sources":["/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.interceptor.ts"],"names":[],"mappings":";;;AAAA,2CAA8G;AAC9G,+BAA4D;AAC5D,8CAAqD;AAErD;;GAEG;AACH,6DAA6D;AAC7D,MAAa,kBAAkB;IAC7B;;;OAGG;IACH,YAA6B,SAAiB;QAAjB,cAAS,GAAT,SAAS,CAAQ;IAAG,CAAC;IAElD,SAAS,CAAC,QAA0B,EAAE,IAAoB;QACxD,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CACvB,IAAA,mBAAO,EAAC,IAAI,CAAC,SAAS,CAAC,EACvB,IAAA,sBAAU,EAAC,CAAC,GAAY,EAAqB,EAAE;YAC7C,IAAI,GAAG,YAAY,mBAAY,EAAE;gBAC/B,OAAO,IAAA,iBAAU,EAAC,GAAG,EAAE,CAAC,IAAI,qCAA4B,CAAC,sBAAsB,CAAC,CAAC,CAAC;aACnF;YACD,OAAO,IAAA,iBAAU,EAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;CACF;AAlBD,gDAkBC","sourcesContent":["import { CallHandler, ExecutionContext, InternalServerErrorException, NestInterceptor } from '@nestjs/common';\nimport { Observable, throwError, TimeoutError } from 'rxjs';\nimport { catchError, timeout } from 'rxjs/operators';\n\n/**\n * An interceptor that throws an error if a request takes longer than the provided timeout.\n */\n// Adapted from https://stackoverflow.com/a/66852766/10808983\nexport class TimeoutInterceptor<T> implements NestInterceptor<T, T> {\n  /**\n   * Create a new {@link TimeoutInterceptor}.\n   * @param timeoutMs - The number of milliseconds before a request times out\n   */\n  constructor(private readonly timeoutMs: number) {}\n\n  intercept(_context: ExecutionContext, next: CallHandler<T>): Observable<T> {\n    return next.handle().pipe(\n      timeout(this.timeoutMs),\n      catchError((err: unknown): Observable<never> => {\n        if (err instanceof TimeoutError) {\n          return throwError(() => new InternalServerErrorException('The server timed out'));\n        }\n        return throwError(() => err);\n      })\n    );\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"eea62f6b8a913a437e24d3e0736398773762e615"},"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.module.ts":{"path":"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.module.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":0},"end":{"line":8,"column":62}},"11":{"start":{"line":9,"column":0},"end":{"line":9,"column":31}},"12":{"start":{"line":10,"column":17},"end":{"line":10,"column":42}},"13":{"start":{"line":11,"column":30},"end":{"line":11,"column":62}},"14":{"start":{"line":12,"column":20},"end":{"line":13,"column":1}},"15":{"start":{"line":14,"column":0},"end":{"line":19,"column":18}},"16":{"start":{"line":20,"column":0},"end":{"line":20,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[1,0],"4":[1,1],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[1,0,0]},"inputSourceMap":{"version":3,"file":"/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.module.ts","sources":["/Users/brennan-lu/Desktop/voiceflow/libs/packages/nestjs-timeout/src/timeout.module.ts"],"names":[],"mappings":";;;;;;;;;AAAA,2CAAwC;AAExC,+DAA2D;AAM3D,IAAa,aAAa,GAA1B,MAAa,aAAa;CAAG,CAAA;AAAhB,aAAa;IAJzB,IAAA,eAAM,EAAC;QACN,SAAS,EAAE,CAAC,wCAAkB,CAAC;QAC/B,OAAO,EAAE,CAAC,wCAAkB,CAAC;KAC9B,CAAC;GACW,aAAa,CAAG;AAAhB,sCAAa","sourcesContent":["import { Module } from '@nestjs/common';\n\nimport { TimeoutInterceptor } from './timeout.interceptor';\n\n@Module({\n  providers: [TimeoutInterceptor],\n  exports: [TimeoutInterceptor],\n})\nexport class TimeoutModule {}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7ca6e981b4c36301b75c6973e2e77e32d48329a2"}}